# Cline AI Agent 系统提示词分析

## 1. 提示词结构概览

系统提示词位置: src/core/prompts/system.ts
主要组成部分:
- 基础角色定义
- 工具使用说明
- 环境配置要求
- 工作流程规范
- 错误处理指南

## 2. 基础提示词分析

### 2.1 角色定义
基础角色设定:
- 定位为高技能软件工程师 (Cline)
- 强调多语言和框架知识储备
- 注重设计模式和最佳实践
- 专业且实用的定位

### 2.2 工作原则
五大核心原则:
1. 直接高效的响应风格
2. 优先考虑代码实现而非解释
3. 将复杂任务分解为可管理的步骤
4. 充分利用可用工具完成任务
5. 通过测试验证工作成果

## 3. 工具使用规范

### 3.1 工具调用格式
XML格式规范:
- 使用工具名称标签
- 参数名称和值的嵌套结构
- 完整的开闭标签
- 清晰的层次结构

### 3.2 核心工具集
可用工具列表:
1. 文件操作类
   - read_file: 读取文件内容
   - write_to_file: 创建或修改文件
   - apply_diff: 应用文件变更

2. 系统工具类
   - execute_command: 执行命令行指令
   - list_files: 列出目录内容
   - search_files: 搜索文件内容

3. 浏览器工具类
   - browser_action: 浏览器控制操作

4. 代码分析类
   - list_code_definition_names: 获取代码定义

## 4. 环境感知指令

### 4.1 环境信息处理
标记规范:
- environment_details: 环境信息标记
- task: 任务信息标记
- user_message: 用户消息标记

### 4.2 工作目录规范
目录处理规则:
- 使用固定的工作目录
- 相对路径处理方式
- 命令执行位置说明
- 文件路径解析规则

## 5. 代码处理规范

### 5.1 代码修改原则
基本准则:
1. 保持代码风格一致性
2. 遵循语言和框架最佳实践
3. 添加适当的注释说明
4. 实现完善的错误处理
5. 关键功能测试要求

### 5.2 差异处理规范
修改文件要求:
1. 使用 apply_diff 进行精确修改
2. 提供完整的上下文信息
3. 确保差异应用成功
4. 验证修改结果

## 6. 交互处理规范

### 6.1 响应格式要求
标准格式:
1. 清晰简洁的解释
2. 结构化的代码块
3. 步骤化的指导
4. 必要的错误提示

### 6.2 错误处理流程
处理步骤:
1. 提供明确的错误信息
2. 给出可能的解决方案
3. 提供备选处理方案
4. 必要时请求用户澄清

## 7. 特殊功能支持

### 7.1 浏览器操作规范
操作要求:
1. 考虑视口大小限制
2. 处理动态加载内容
3. 验证页面状态变化
4. 截图确认操作结果

### 7.2 MCP工具集成
集成规范:
1. 服务器连接管理
2. 工具能力说明
3. 资源访问控制
4. 状态同步处理

## 8. 提示词优化建议

### 8.1 功能优化
改进方向:
1. 任务分解更细致
2. 验证步骤更完善
3. 错误恢复更可靠
4. 上下文理解更智能

### 8.2 工具使用优化
优化建议:
1. 补充工具组合指南
2. 完善选择决策树
3. 提供效率优化建议
4. 增加实例说明

### 8.3 交互体验优化
改进点:
1. 错误提示更友好
2. 进度反馈更清晰
3. 上下文理解更准确
4. 响应更加智能化

### 8.4 代码质量提升
提升方向:
1. 代码规范更严格
2. 测试要求更完善
3. 文档要求更详细
4. 性能考虑更周全 